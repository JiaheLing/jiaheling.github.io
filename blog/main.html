<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>J. Ling's Blog</title>
  <meta name="description" content="A simple, bilingual blog (English & Chinese)." />
  <link rel="icon" href="data:," />

  <!-- Plausible Analytics (moved to head) -->
  <script defer data-domain="jiaheling.github.io/blog/main.html" src="https://plausible.io/js/script.js"></script>

  <style>
    /* --- Base / layout --- */
    :root {
      --bg: #ffffff;
      --text: #111111;
      --muted: #6b7280;
      --link: #111111;
      --link-visited: #111111;
      --card: #f3f4f6;
      --border: #e5e7eb;
      --maxw: 72ch;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0b0f14;
        --text: #e5e7eb;
        --muted: #9ca3af;
        --link: #e5e7eb;
        --link-visited: #e5e7eb;
        --card: #101826;
        --border: #1f2937;
      }
    }

    html, body { height: 100%; }
    body {
      margin: 0;
      font: 16px/1.75 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial,
            "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Noto Sans CJK SC", "Source Han Sans SC",
            "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: var(--bg);
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

    .wrap { max-width: var(--maxw); margin: 0 auto; padding: 1.5rem 1rem 3rem; }

    header { margin-bottom: .5rem; }
    header h1 { font-size: 1.6rem; margin: 0 0 .25rem; color: var(--link); }

    a { color: var(--link); text-decoration: none; }
    a:visited { color: var(--link-visited); }

    .controls { margin: .75rem 0 1rem; display:flex; gap:.5rem; flex-wrap:wrap; }
    .controls button { border:1px solid var(--border); background:var(--card); color: var(--link); padding:.35rem .7rem; border-radius:999px; cursor:pointer; }
    .controls button:focus{ outline:2px solid var(--border); outline-offset:2px; }

    .posts { list-style: none; padding: 0; margin: 0; }
    .post { margin: 0 0 .8rem; border: 1px solid var(--border); border-radius: 12px; overflow: hidden; background: transparent; }

    details.post summary { list-style:none; cursor:pointer; padding: .75rem .9rem; background: var(--card); display:block; }
    details.post[open] summary { border-bottom: 1px solid var(--border); }
    details.post summary::-webkit-details-marker { display:none; }

    .summary-row { display:flex; gap:.6rem; align-items:baseline; justify-content:space-between; }
    .summary-left { min-width:0; }
    .summary-right { white-space:nowrap; color: var(--muted); font-size:.9rem; }
    .summary-action { border: none; background: transparent; color: var(--link); cursor: pointer; text-decoration: underline; text-underline-offset: 2px; padding:0; font-size:.95rem; }

    .post time { color: var(--muted); font-size: .85rem; display:block; }
    .post h2 { margin: .1rem 0 .3rem; font-size: 1.15rem; color: var(--link); }
    .post p.excerpt { margin: 0; color: var(--muted); }

    .post .content { background: var(--bg); padding: .85rem .95rem 1rem; }
    .prose p { margin: .6rem 0; }
    .prose h3 { margin: .9rem 0 .4rem; font-size: 1.05rem; }
    .prose img { max-width: 100%; height: auto; border-radius: 8px; }
    .prose figure { margin: 0; }
    .prose figcaption { color: var(--muted); font-size: .9rem; text-align: center; }
    code, pre { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    pre { background: var(--card); border: 1px solid var(--border); padding: .75rem; border-radius: 8px; overflow: auto; }

    footer { margin-top: 2rem; color: var(--muted); font-size: .9rem; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>J. Ling's Blog</h1>
    </header>

    <div class="controls" aria-label="Post controls">
      <button id="expandAll" type="button" aria-controls="postList">Show all</button>
      <button id="collapseAll" type="button" aria-controls="postList">Collapse all</button>
    </div>

    <main>
      <ul class="posts" id="postList">

        <!-- 9/9/2025 -->
        <li>
          <details class="post" data-post="Why I start to write the blog / 双语写作">
            <summary>
              <div class="summary-row">
                <div class="summary-left">
                  <time datetime="2025-09-09">September 9, 2025</time>
                  <h2>Test / 测试</h2>
                  <p class="excerpt">Test <span lang="zh-Hans">测试 Test 测试 </span></p>
                </div>
                <div class="summary-right"><button class="summary-action" type="button" aria-expanded="false" data-label-show="Details" data-label-hide="Hide">Details</button></div>
              </div>
            </summary>
            <div class="content prose">
              <p>测试 Test</p>
              <h3>测试 Test</h3>
              <p>测试 Test</p>
            </div>
          </details>
        </li>

        <!-- Write in English & Chinese-->
        <!-- <li>
          <details class="post" data-post="Writing in two languages / 双语写作">
            <summary>
              <div class="summary-row">
                <div class="summary-left">
                  <time datetime="2025-09-07">September 7, 2025</time>
                  <h2>Writing in two languages / 双语写作</h2>
                  <p class="excerpt">Thoughts on bilingual blogging — <span lang="zh-Hans">如何在同一篇文章里平衡 English 和 中文。</span></p>
                </div>
                <div class="summary-right"><button class="summary-action" type="button" aria-expanded="false" data-label-show="Details" data-label-hide="Hide">Details</button></div>
              </div>
            </summary>
            <div class="content prose">
              <p>Short intro content appears here. Click the Details button (or anywhere on the row) again to collapse.</p>
              <h3>Why bilingual?</h3>
              <p>Writing in both English and Chinese helps reach different audiences and improves clarity of thought.</p>
            </div>
          </details>
        </li> -->

        <!-- Write in Chinese -->
        <!-- <li>
          <details class="post" data-post="你好，世界">
            <summary>
              <div class="summary-row">
                <div class="summary-left">
                  <time datetime="2025-09-05">2025年9月5日</time>
                  <h2 lang="zh-Hans">你好，世界</h2>
                  <p class="excerpt" lang="zh-Hans">写作很简单：从今天开始记录想法与日常。</p>
                </div>
                <div class="summary-right"><button class="summary-action" type="button" aria-expanded="false" data-label-show="更多" data-label-hide="收起">更多</button></div>
              </div>
            </summary>
            <div class="content prose" lang="zh-Hans">
              <p>欢迎来到我的新博客。尽量保持简洁，以文字为主，偶尔配图。</p>
              <h3>为什么现在开始？</h3>
              <p>持续写作能帮助我理清思路。这里会有短文，也会有偶尔的长文。</p>
            </div>
          </details>
        </li> -->

        <!-- Write in English -->
        <!-- <li>
          <details class="post" data-post="Hello, World">
            <summary>
              <div class="summary-row">
                <div class="summary-left">
                  <time datetime="2025-09-01">September 1, 2025</time>
                  <h2>Hello, World</h2>
                  <p class="excerpt">A short note about why I started this blog.</p>
                </div>
                <div class="summary-right"><button class="summary-action" type="button" aria-expanded="false" data-label-show="Details" data-label-hide="Hide">Details</button></div>
              </div>
            </summary>
            <div class="content prose">
              <p>Welcome to my new blog. It’s intentionally simple—mostly words.</p>
              <h3>Why now?</h3>
              <p>Publishing regularly helps me think clearly. Expect short entries and occasional longer essays.</p>
            </div>
          </details>
        </li> -->

      </ul>
    </main>



    <footer>
      <p>© <span id="y"></span> Jiahe Ling. All rights reserved.</p>
    </footer>
  </div>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    (function sortPosts(){
      const list = document.getElementById('postList');
      const items = Array.from(list.querySelectorAll('li'));
      items.sort((a, b) => {
        const da = new Date(a.querySelector('time')?.getAttribute('datetime') || 0).getTime();
        const db = new Date(b.querySelector('time')?.getAttribute('datetime') || 0).getTime();
        return db - da;
      });
      items.forEach(li => list.appendChild(li));
    })();

    document.querySelectorAll('details.post').forEach(d => {
      const btn = d.querySelector('.summary-action');
      if (!btn) return;
      const show = btn.dataset.labelShow || 'Details';
      const hide = btn.dataset.labelHide || 'Hide';
      const update = () => { btn.textContent = d.open ? hide : show; btn.setAttribute('aria-expanded', String(d.open)); };
      btn.addEventListener('click', (e) => { e.preventDefault(); e.stopPropagation(); d.open = !d.open; update(); });
      d.addEventListener('toggle', update);
      update();
    });

    const expandAll = document.getElementById('expandAll');
    const collapseAll = document.getElementById('collapseAll');
    expandAll?.addEventListener('click', () => {
      document.querySelectorAll('details.post').forEach(d => d.open = true);
      document.querySelectorAll('.summary-action').forEach(b => { const hide = b.dataset.labelHide || 'Hide'; b.textContent = hide; b.setAttribute('aria-expanded', 'true'); });
    });
    collapseAll?.addEventListener('click', () => {
      document.querySelectorAll('details.post').forEach(d => d.open = false);
      document.querySelectorAll('.summary-action').forEach(b => { const show = b.dataset.labelShow || 'Details'; b.textContent = show; b.setAttribute('aria-expanded', 'false'); });
    });

    (function trackPostOpensOnce(){
      if (typeof plausible !== 'function') return;
      const opened = new Set();
      document.querySelectorAll('details.post').forEach(d => {
        d.addEventListener('toggle', () => {
          if (d.open) {
            const id = d.dataset.post || d.querySelector('h2')?.textContent?.trim() || 'Untitled';
            if (!opened.has(id)) { plausible('Post Opened', { props: { post: id } }); opened.add(id); }
          }
        });
      });
    })();
  </script>
</body>
</html>