<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>J. Ling's Blogs</title>
  <meta name="description" content="A simple, bilingual blog (English & Chinese)." />
  <link rel="icon" href="data:," />

  <style>
    /* --- Base / layout --- */
    :root {
      --bg: #ffffff;
      --text: #111111;
      --muted: #6b7280; /* gray-500 */
      --link: #111111;  /* set links to black */
      --link-visited: #111111; /* visited also black */
      --card: #f8fafc; /* slate-50 */
      --border: #e5e7eb; /* gray-200 */
      --maxw: 72ch; /* a touch larger for CJK */
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0b0f14;
        --text: #e5e7eb;
        --muted: #9ca3af;
        --link: #e5e7eb;  /* black equivalent in dark mode */
        --link-visited: #e5e7eb;
        --card: #0f172a;
        --border: #1f2937;
      }
    }

    html, body { height: 100%; }
    body {
      margin: 0;
      font: 16px/1.8 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial,
            "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Noto Sans CJK SC", "Source Han Sans SC",
            "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: var(--bg);
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

    .wrap { max-width: var(--maxw); margin: 0 auto; padding: 2rem 1rem 4rem; }

    header { margin-bottom: 1rem; }
    header h1 { font-size: 1.875rem; margin: 0 0 .25rem; color: var(--link); }
    header p { margin: 0; color: var(--muted); }

    /* Links look like regular text for better reading */
    a { color: var(--link); text-decoration: none; }
    a:visited { color: var(--link-visited); }

    /* --- Controls --- */
    .controls { margin: 1rem 0 1.5rem; display:flex; gap:.5rem; flex-wrap:wrap; }
    .controls button { border:1px solid var(--border); background:var(--card); color: var(--link); padding:.45rem .8rem; border-radius:999px; cursor:pointer; }
    .controls button:focus{ outline:2px solid var(--border); outline-offset:2px; }

    /* --- Post list --- */
    .posts { list-style: none; padding: 0; margin: 0; }
    .post { margin: 0 0 1rem; background: var(--card); border: 1px solid var(--border); border-radius: 12px; }

    details.post summary { list-style:none; cursor:pointer; padding: 1rem 1rem .75rem; border-radius: 12px; }
    details.post[open] summary { border-bottom: 1px solid var(--border); }
    details.post summary::-webkit-details-marker { display:none; }

    .summary-row { display:flex; gap:.75rem; align-items:baseline; justify-content:space-between; }
    .summary-left { min-width:0; }
    .summary-right { white-space:nowrap; color: var(--muted); font-size:.9rem; }
    .summary-action { border: none; background: transparent; color: var(--link); cursor: pointer; text-decoration: underline; text-underline-offset: 2px; padding:0; }

    .post time { color: var(--muted); font-size: .9rem; display:block; }
    .post h2 { margin: .25rem 0 .5rem; font-size: 1.25rem; color: var(--link); }
    .post p.excerpt { margin: 0 0 .25rem; color: var(--muted); }

    .post .content { padding: 1rem; }
    .prose img { max-width: 100%; height: auto; border-radius: 8px; }
    .prose figure { margin: 0; }
    .prose figcaption { color: var(--muted); font-size: .9rem; text-align: center; }
    code, pre { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    pre { background: var(--card); border: 1px solid var(--border); padding: 1rem; border-radius: 8px; overflow: auto; }

    footer { margin-top: 3rem; color: var(--muted); font-size: .9rem; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <!-- Title is plain text (no link) -->
      <h1>J. Ling's Blogs</h1>
    </header>

    <div class="controls" aria-label="Post controls">
      <button id="expandAll" type="button" aria-controls="postList">Show all</button>
      <button id="collapseAll" type="button" aria-controls="postList">Collapse all</button>
    </div>

    <main>
      <ul class="posts" id="postList">
        <!-- HOW TO ADD POSTS
             - Duplicate a <li> block.
             - Set <time datetime="YYYY-MM-DD">. Sorting is automatic (newest → oldest).
             - Write a brief <p class="excerpt"> and full content in <div class="content">.
             - No links needed; click Details to toggle.
        -->

        <!-- POST: Mixed language example -->
        <li>
          <details class="post">
            <summary>
              <div class="summary-row">
                <div class="summary-left">
                  <time datetime="2025-09-07">September 7, 2025</time>
                  <h2>Writing in two languages / 双语写作</h2>
                  <p class="excerpt">Thoughts on bilingual blogging — <span lang="zh-Hans">如何在同一篇文章里平衡 English 和 中文。</span></p>
                </div>
                <div class="summary-right"><button class="summary-action" type="button" aria-expanded="false">Details</button></div>
              </div>
            </summary>
            <div class="content prose">
              <p>Short intro content appears here. Click the Details button (or anywhere on the row) again to collapse.</p>
              <h3>Why bilingual?</h3>
              <p>Writing in both English and Chinese helps reach different audiences and improves clarity of thought.</p>
            </div>
          </details>
        </li>

        <!-- POST: Chinese example -->
        <li>
          <details class="post">
            <summary>
              <div class="summary-row">
                <div class="summary-left">
                  <time datetime="2025-09-05">2025年9月5日</time>
                  <h2 lang="zh-Hans">你好，世界</h2>
                  <p class="excerpt" lang="zh-Hans">写作很简单：从今天开始记录想法与日常。</p>
                </div>
                <div class="summary-right"><button class="summary-action" type="button" aria-expanded="false">详情</button></div>
              </div>
            </summary>
            <div class="content prose" lang="zh-Hans">
              <p>欢迎来到我的新博客。尽量保持简洁，以文字为主，偶尔配图。</p>
              <h3>为什么现在开始？</h3>
              <p>持续写作能帮助我理清思路。这里会有短文，也会有偶尔的长文。</p>
            </div>
          </details>
        </li>

        <!-- POST: English example -->
        <li>
          <details class="post">
            <summary>
              <div class="summary-row">
                <div class="summary-left">
                  <time datetime="2025-09-01">September 1, 2025</time>
                  <h2>Hello, World</h2>
                  <p class="excerpt">A short note about why I started this blog.</p>
                </div>
                <div class="summary-right"><button class="summary-action" type="button" aria-expanded="false">Details</button></div>
              </div>
            </summary>
            <div class="content prose">
              <p>Welcome to my new blog. It’s intentionally simple—mostly words.</p>
              <h3>Why now?</h3>
              <p>Publishing regularly helps me think clearly. Expect short entries and occasional longer essays.</p>
            </div>
          </details>
        </li>
      </ul>
    </main>

    <footer>
      <p>© <span id="y"></span> J. Ling. All rights reserved.</p>
    </footer>
  </div>

  <script>
    // Footer year
    document.getElementById('y').textContent = new Date().getFullYear();

    // Sort posts newest → oldest using the <time datetime> inside each post
    (function sortPosts(){
      const list = document.getElementById('postList');
      const items = Array.from(list.querySelectorAll('li'));
      items.sort((a, b) => {
        const da = new Date(a.querySelector('time')?.getAttribute('datetime') || 0).getTime();
        const db = new Date(b.querySelector('time')?.getAttribute('datetime') || 0).getTime();
        return db - da; // newest first
      });
      items.forEach(li => list.appendChild(li));
    })();

    // Make the "Details" button inside <summary> toggle the details element without double-toggling
    document.querySelectorAll('details.post').forEach(d => {
      const btn = d.querySelector('.summary-action');
      if (!btn) return;
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        d.open = !d.open;
        btn.textContent = d.open ? (btn.textContent === '详情' ? '收起' : 'Hide') : (btn.textContent === '收起' ? '详情' : 'Details');
        btn.setAttribute('aria-expanded', String(d.open));
      });
      d.addEventListener('toggle', () => {
        btn.textContent = d.open ? (btn.textContent === '详情' ? '收起' : 'Hide') : (btn.textContent === '收起' ? '详情' : 'Details');
        btn.setAttribute('aria-expanded', String(d.open));
      });
    });

    // Expand/Collapse all controls
    const expandAll = document.getElementById('expandAll');
    const collapseAll = document.getElementById('collapseAll');
    expandAll?.addEventListener('click', () => {
      document.querySelectorAll('details.post').forEach(d => d.open = true);
      document.querySelectorAll('.summary-action').forEach(b => {
        b.textContent = (b.textContent === '详情' || b.textContent === '收起') ? '收起' : 'Hide';
        b.setAttribute('aria-expanded', 'true');
      });
    });
    collapseAll?.addEventListener('click', () => {
      document.querySelectorAll('details.post').forEach(d => d.open = false);
      document.querySelectorAll('.summary-action').forEach(b => {
        b.textContent = (b.textContent === 'Hide' || b.textContent === 'Details') ? 'Details' : '详情';
        b.setAttribute('aria-expanded', 'false');
      });
    });
  </script>

  <!--
    OPTIONAL ANALYTICS — add ONE provider snippet below to count views invisibly.

    1) Plausible (simple, privacy‑friendly). Replace YOURDOMAIN with your GitHub Pages domain.
       <script defer data-domain="YOURDOMAIN.github.io" src="https://plausible.io/js/script.js"></script>

    2) Cloudflare Web Analytics (free). Replace TOKEN.
       <script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon='{"token": "YOUR_TOKEN_HERE"}'></script>
  -->
  <script defer data-domain="jiaheling.github.io" src="https://plausible.io/js/script.js"></script>
</body>
</html>
